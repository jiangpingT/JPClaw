# 架构决策记录（ADR）

这个目录包含了 JPClaw 项目的所有重要架构决策记录。

## 什么是 ADR？

**Architecture Decision Record（架构决策记录）**是一种记录重要架构决策的轻量级文档格式。

### 为什么使用 ADR？

- **可追溯性**：记录为什么做某个决策，而不只是做了什么
- **知识传承**：新成员可以快速理解系统设计思路
- **避免重复讨论**：决策已有记录，避免反复争论同一问题
- **支持演进**：当需要改变决策时，可以回顾当初的背景

### ADR 的生命周期

1. **已提议（Proposed）** - 决策正在讨论中
2. **已采纳（Accepted）** - 决策已被采纳并实施
3. **已废弃（Deprecated）** - 决策已过时但代码仍在使用
4. **已替代（Superseded）** - 决策被新的 ADR 替代

---

## 📋 ADR 索引

| 编号 | 标题 | 状态 | 日期 | 标签 |
|------|------|------|------|------|
| [001](001-multi-agent-collaboration.md) | 多智能体协作系统架构 | ✅ 已采纳 | 2026-02-17 | `discord`, `multi-agent`, `ai-driven` |

---

## 🎯 核心设计原则

我们的 ADR 遵循以下核心原则：

### 1. 永远不要硬编码
- 默认必须泛化实现
- 硬编码是最后手段
- 泛化是第一优先级

### 2. AI 驱动决策
- 让 AI 理解和决策，而不是硬编码规则
- 给 AI 足够的上下文
- 通过 description 而非代码实现逻辑

### 3. 从根本解决问题
- 找到本质原因
- 不治标不治本
- 动态获取最新数据而非靠猜

---

## 📝 如何创建 ADR

### 步骤

1. **复制模板**
   ```bash
   cp docs/adr/template.md docs/adr/XXX-your-decision-title.md
   ```

2. **编号规则**
   - 使用三位数字：001, 002, 003...
   - 按时间顺序递增
   - 查看现有 ADR，使用下一个可用编号

3. **填写内容**
   - **背景**：为什么需要做这个决策？
   - **决策**：我们选择了什么方案？
   - **考虑的方案**：列出所有备选方案及其优缺点
   - **后果**：这个决策的影响（积极/消极/风险）
   - **实现细节**：关键代码位置和接口

4. **更新索引**
   - 在本文件的 ADR 索引表格中添加新记录

5. **提交**
   ```bash
   git add docs/adr/XXX-your-decision-title.md
   git add docs/adr/README.md
   git commit -m "docs: add ADR-XXX about your decision"
   ```

### 最佳实践

- **简洁明了**：ADR 不是详细设计文档，重点是"为什么"
- **及时记录**：在决策做出时就记录，不要拖延
- **保持客观**：记录事实和分析，避免主观情绪
- **版本控制**：ADR 和代码一起提交，保持同步
- **链接代码**：在 ADR 中链接关键代码位置

### 何时创建 ADR？

以下情况应该创建 ADR：

- ✅ 重要的架构决策（如选择数据库、框架、设计模式）
- ✅ 有多个可行方案需要选择
- ✅ 决策会影响多个模块或长期演进
- ✅ 决策违反了既有约定（需要解释原因）
- ✅ 采用了新技术或新方法

不需要创建 ADR 的情况：

- ❌ 简单的 Bug 修复
- ❌ 纯粹的代码重构（不改变架构）
- ❌ 配置调整
- ❌ 文档更新

---

## 🌟 优秀 ADR 参考

### ADR-001: 多智能体协作系统
**为什么优秀**：
- ✅ 清晰的背景说明（解决什么问题）
- ✅ 列出了3个备选方案及详细对比
- ✅ 记录了完整的决策后果（积极/消极/风险）
- ✅ 提供了详细的实现细节和代码位置
- ✅ 包含完整的工作流程图
- ✅ 列出了验证清单

**学到什么**：
- 记录"为什么不选 A/B"和"为什么选 C"同样重要
- 后果不只是优点，也要诚实记录缺点和风险
- 实现细节应该足够详细，让读者能找到代码

---

## 🔗 相关资源

- [ADR 模板](template.md)
- [系统架构文档](../../ARCHITECTURE.md)
- [版本更新日志](../../CHANGELOG.md)
- [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)
- [Semantic Versioning](https://semver.org/lang/zh-CN/)

---

## 📊 统计

- **总 ADR 数**：1
- **已采纳**：1
- **已提议**：0
- **已废弃**：0
- **已替代**：0

---

**ADR 是项目的架构记忆，用心记录每一个重要决策！** ✨
