# JPClaw技能Description编写规范

**版本**: 1.0.0
**日期**: 2026-02-16
**基于**: 100%通过率优化经验

---

## 🎯 核心原则

### Description的价值

```
Description质量 = AI路由准确率的80%决定因素
```

**为什么Description这么重要**：
- AI **只能看到** skill name + description
- AI **看不到** 代码实现、SKILL.md详细文档、使用示例
- Description是AI理解技能功能的**唯一依据**

---

## 📐 黄金公式

### 完整结构（7个要素）

```yaml
description: [标签] 功能定义。详细能力说明。适用于"场景示例1"、"场景示例2"等查询。技术栈说明。注意：反向说明
```

### 要素说明

| 要素 | 位置 | 必需性 | 作用 | 示例 |
|------|------|--------|------|------|
| **[标签]** | 开头 | ⭐⭐⭐ | 快速分类 | [中国版] [CLI工具] [本地运行] |
| **功能定义** | 第1句 | ⭐⭐⭐⭐⭐ | 一句话说清楚 | 地图POI搜索工具 |
| **详细能力** | 第2句 | ⭐⭐⭐⭐ | 具体能做什么 | 查找餐厅、咖啡馆、加油站等兴趣点 |
| **场景示例** | 中间 | ⭐⭐⭐⭐⭐ | AI语义匹配关键 | 适用于"北京附近有什么XX" |
| **技术栈** | 后面 | ⭐⭐⭐ | 技术边界 | 使用高德地图API |
| **限制说明** | 可选 | ⭐⭐ | 明确范围 | 覆盖中国全国POI数据 |
| **反向说明** | 最后 | ⭐⭐⭐⭐ | 避免混淆 | 注意：国外地点请用goplaces |

---

## ✅ 优秀示例

### 示例1：地域区分型

```yaml
# ✅ 优秀
description: **[中国版]** 地图POI搜索工具（高德地图API）。查找北京/上海/深圳等城市的餐厅、咖啡馆、加油站等兴趣点。支持周边搜索、关键词搜索、距离计算。适用于"北京附近有什么XX"、"三里屯哪里有咖啡馆"等中国地点查询。覆盖中国全国POI数据。注意：国外地点请用goplaces技能

# ❌ 差
description: 地图搜索工具
```

**优秀原因**：
- ✅ [中国版]标签立即区分地域
- ✅ 明确技术栈（高德地图）
- ✅ 具体城市示例
- ✅ 带引号的场景示例
- ✅ 与goplaces明确区分

---

### 示例2：功能区分型

```yaml
# ✅ 优秀
description: 快速截图工具。专注于打开网页并保存截图，不进行任何交互操作。适用于"截图XX网站"、"保存XX网页"、"网页快照"等纯截图需求。如需填表、点击等交互请用browser-automation技能

# ❌ 差
description: 浏览器工具。可以截图
```

**优秀原因**：
- ✅ 明确"不进行交互"与browser-automation区分
- ✅ 场景示例精准
- ✅ 反向说明清晰

---

### 示例3：技术区分型

```yaml
# ✅ 优秀
description: 本地Whisper语音转录工具。使用OpenAI Whisper模型在本地离线转录音频文件。支持多种音频格式和语言。适用于"用本地Whisper转录音频"、"离线语音识别"等场景。需要本地安装Whisper模型。注意：云端转录请用whisper-api技能

# ❌ 差
description: 语音转录工具
```

**优秀原因**：
- ✅ "本地"vs"云端"明确区分
- ✅ 技术栈说明（Whisper模型）
- ✅ 与whisper-api明确区分

---

## ❌ 常见错误

### 错误1：过于简短

```yaml
# ❌ 错误
description: POI搜索

# 问题：AI无法判断适用场景、技术栈、地域范围
```

---

### 错误2：技术术语过度

```yaml
# ❌ 错误
description: 时间序列数据监控工具。使用fetch和Playwright两种抓取模式

# 问题："时间序列"AI可能不理解，Playwright可能与browser-automation混淆
```

**修正**：
```yaml
# ✅ 正确
description: 数据监控与趋势追踪工具。持续监控数据变化，自动保存历史快照并生成对比报告
```

---

### 错误3：缺少场景示例

```yaml
# ❌ 错误
description: 邮件管理工具。支持发送和接收邮件

# 问题：AI不知道什么query应该路由到这个技能
```

**修正**：
```yaml
# ✅ 正确
description: 邮件管理工具。支持发送、接收、搜索、归档邮件。适用于"读邮件"、"发邮件给XX"、"搜索来自XX的邮件"等查询
```

---

### 错误4：缺少反向说明

```yaml
# ❌ 错误
description: 浏览器自动化工具。可以截图、点击、填表

# 问题：与web-screenshot功能重叠，AI可能混淆
```

**修正**：
```yaml
# ✅ 正确
description: 浏览器自动化工具。使用Playwright进行复杂网页交互：点击、填表、滚动。适用于"自动填写表单"、"登录网站"等交互场景。注意：如只需截图请用web-screenshot技能
```

---

### 错误5：内容被截断

```yaml
# ❌ 错误
description: 输入我的即刻主页：https://web.okjike.com/u/XXX
输出：被关注的数字
执行步骤：先让我输入用户名、密码，或者从cookie中登录，然后进

# 问题：描述被截断，包含具体URL，格式混乱
```

**修正**：
```yaml
# ✅ 正确
description: 即刻网页版自动化访问工具。自动登录即刻网页版，访问用户主页并提取数据（关注数、被关注数等）。支持Cookie登录或用户名密码登录。适用于"访问即刻网页版"、"查看即刻主页数据"等场景
```

---

## 📏 长度建议

| 类型 | 字数 | 说明 |
|------|------|------|
| **最短** | 80字 | 包含核心要素即可 |
| **标准** | 120-150字 | 推荐长度，清晰完整 |
| **最长** | 200字 | 复杂技能可适当延长 |
| **超长** | >200字 | ⚠️ 避免，AI可能困惑 |

---

## 🎨 标签使用规范

### 地域标签

```yaml
[中国版]  # 中国大陆服务
[国际版]  # 国际服务
[全球]    # 全球通用
```

### 运行方式标签

```yaml
[本地运行]  # 本地执行
[云端API]   # 调用远程API
[CLI工具]   # 命令行工具
[Web服务]   # Web服务
```

### 技术栈标签

```yaml
[Playwright]  # 使用Playwright
[Google API]  # Google服务
[OpenAI]      # OpenAI服务
```

### 专用场景标签

```yaml
[即刻专用]  # 特定平台（谨慎使用，优先泛化）
[macOS]     # 平台限制
```

---

## 🔍 场景示例编写规范

### 格式要求

```yaml
# ✅ 正确 - 用引号包裹
适用于"截图网站"、"保存网页"、"网页快照"等查询

# ❌ 错误 - 没有引号
适用于截图网站、保存网页等查询
```

### 示例数量

- **最少**：2个场景示例
- **推荐**：3-4个场景示例
- **最多**：5个场景示例

### 示例多样性

```yaml
# ✅ 好 - 覆盖不同表达方式
"搜索Gmail邮件"、"查找来自XX的邮件"、"Gmail搜索"

# ❌ 差 - 太相似
"搜索邮件"、"搜索Gmail"、"搜索邮箱"
```

---

## 🔗 反向说明编写规范

### 格式

```yaml
注意：如需XX，请用YY技能
```

### 何时需要反向说明

1. **功能重叠** - 与其他技能功能部分重叠
2. **易混淆** - 名称或功能相似
3. **技术区分** - 相同功能不同实现方式

### 示例

```yaml
# 功能区分
browser-automation: 注意：如只需截图请用web-screenshot技能

# 地域区分
zh-map-amap: 注意：国外地点请用goplaces技能

# 技术区分
whisper-local: 注意：云端转录请用whisper-api技能
```

---

## ✍️ 编写流程

### 步骤1：确定核心功能

问自己：这个技能**最核心**的功能是什么？

```
例：whisper-local
→ 核心功能：本地语音转录
```

### 步骤2：列出关键特征

```
- 本地运行（vs 云端）
- Whisper模型
- 离线可用
- 支持多语言
```

### 步骤3：找出差异化

与哪些技能相似？如何区分？

```
相似：whisper-api（都是语音转录）
区分：本地 vs 云端
```

### 步骤4：构思场景示例

用户会怎么表达这个需求？

```
- "用本地Whisper转录音频"
- "离线语音识别"
- "本地转录这个音频"
```

### 步骤5：组装Description

按照黄金公式组装：

```yaml
description: 本地Whisper语音转录工具。使用OpenAI Whisper模型在本地离线转录音频文件。支持多种音频格式和语言。适用于"用本地Whisper转录音频"、"离线语音识别"等场景。需要本地安装Whisper模型。注意：云端转录请用whisper-api技能
```

### 步骤6：检查清单

- ☑ 功能定义清晰？
- ☑ 场景示例有引号？
- ☑ 技术栈说明？
- ☑ 与相似技能区分？
- ☑ 长度120-150字？
- ☑ 没有截断？
- ☑ 避免技术术语？

---

## 🧪 测试验证

### 自测方法

写完description后，问自己：

1. **用户视角**：用户说"XX"时，AI能理解应该用这个技能吗？
2. **竞争技能**：有没有其他相似技能？description是否明确区分了？
3. **边界清晰**：什么情况**不应该**用这个技能？description是否说清楚了？

### A/B对比测试

```yaml
# 版本A
description: 地图搜索工具

# 版本B
description: [中国版] 地图POI搜索工具（高德地图API）。查找北京/上海等城市的餐厅、咖啡馆等。适用于"北京附近有什么XX"等中国地点查询。注意：国外地点请用goplaces

测试query: "搜索北京附近的咖啡馆"
→ 版本A: confidence 0.65
→ 版本B: confidence 0.92 ✅
```

---

## 📊 质量评分标准

### 优秀 (90-100分)

- ✅ 包含全部7个要素
- ✅ 场景示例3个以上，有引号
- ✅ 与相似技能明确区分
- ✅ 长度适中（120-150字）
- ✅ 无技术术语
- ✅ 实测confidence > 0.85

### 良好 (75-89分)

- ✅ 包含5-6个要素
- ✅ 场景示例2个以上
- ✅ 基本区分相似技能
- ⚠️ 长度稍短或稍长

### 及格 (60-74分)

- ⚠️ 包含4个要素
- ⚠️ 场景示例1-2个
- ⚠️ 区分不够清晰

### 不及格 (<60分)

- ❌ 缺少核心要素
- ❌ 无场景示例或无引号
- ❌ 与其他技能混淆
- ❌ 过短（<80字）或被截断

---

## 🎓 最佳实践

### 1. 从用户视角思考

```
不要问：这个技能能做什么？
而要问：用户会怎么表达这个需求？
```

### 2. 简洁优于复杂

```yaml
# ❌ 过度复杂
description: **[即刻专用数据监控系统]** 即刻账号数据监控与历史趋势分析工具。**核心功能：持续追踪...

# ✅ 简洁聚焦
description: 即刻账号数据追踪工具。专门用于长期监控即刻用户数据变化趋势...
```

### 3. 直白优于技术化

```yaml
# ❌ 技术化
description: 时间序列数据监控

# ✅ 直白
description: 数据监控与趋势追踪
```

### 4. 场景优于功能

```yaml
# ❌ 只说功能
description: 支持发送邮件

# ✅ 说明场景
description: 适用于"发邮件给XX"、"发送附件"等场景
```

---

## 🔄 维护更新

### 何时更新Description

1. **技能功能变更** - 增加或删除功能
2. **路由失败** - 测试发现confidence低
3. **新增相似技能** - 需要更新反向说明
4. **用户反馈** - 用户表达与预期不符

### 更新流程

1. 修改description
2. 运行路由测试
3. 对比confidence变化
4. 验证通过后提交

---

## 📚 参考资源

- [SKILL_ROUTING_EXPLAINED.md](./SKILL_ROUTING_EXPLAINED.md) - 路由系统工作原理
- [CONFIDENCE_EXPLAINED.md](./CONFIDENCE_EXPLAINED.md) - Confidence计算原理
- [SKILL_NAMING_OPTIMIZATION.md](./SKILL_NAMING_OPTIMIZATION.md) - 命名优化方案

---

## 📋 快速检查清单

复制以下清单，编写description时逐项检查：

```
☐ 1. 有功能定义（一句话说清楚）
☐ 2. 有详细能力说明
☐ 3. 有3个以上场景示例，都用引号包裹
☐ 4. 有技术栈说明（如适用）
☐ 5. 有反向说明（如有相似技能）
☐ 6. 长度120-150字
☐ 7. 避免技术术语
☐ 8. 没有被截断
☐ 9. 与相似技能明确区分
☐ 10. 实测confidence > 0.75
```

---

**文档版本**: 1.0.0
**最后更新**: 2026-02-16
**维护者**: JPClaw团队
**基于**: 100%通过率的实战经验 ✨
