# ğŸš€ JPClaw è·¯ç”±æµ‹è¯• - å¿«é€Ÿå¼€å§‹

## ä¸€åˆ†é’Ÿå¼€å§‹æµ‹è¯•

```bash
# 1. ç¡®ä¿ç¼–è¯‘æœ€æ–°ä»£ç 
npm run build

# 2. å¯åŠ¨ gatewayï¼ˆå¦‚æœæœªè¿è¡Œï¼‰
node /Users/mlamp/Workspace/JPClaw/dist/cli/index.js gateway &

# 3. å¿«é€Ÿæµ‹è¯•ï¼ˆ10ä¸ªæ ¸å¿ƒæŠ€èƒ½ï¼‰
cd /Users/mlamp/Workspace/JPClaw/tests
./run-routing-test.sh quick
```

---

## ğŸ“– å‘½ä»¤é€ŸæŸ¥

### ä½¿ç”¨ä¾¿æ·è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
cd /Users/mlamp/Workspace/JPClaw/tests

# å•ä¸ªæŸ¥è¯¢æµ‹è¯•
./run-routing-test.sh chat "æœç´¢ä¸€ä¸‹ä»Šå¤©çš„ç§‘æŠ€æ–°é—»"

# å¿«é€Ÿæµ‹è¯•ï¼ˆ10ä¸ªæ ¸å¿ƒæŠ€èƒ½ï¼Œçº¦30ç§’ï¼‰
./run-routing-test.sh quick

# å®Œæ•´æµ‹è¯•ï¼ˆ80ä¸ªæŠ€èƒ½ï¼Œçº¦2-3åˆ†é’Ÿï¼‰
./run-routing-test.sh full

# è‡ªå®šä¹‰æµ‹è¯•
./run-routing-test.sh test --limit 20
./run-routing-test.sh test --priority high
./run-routing-test.sh test --category "æœç´¢ä¸ä¿¡æ¯"
```

### ç›´æ¥ä½¿ç”¨ CLI

```bash
# å•ä¸ªæŸ¥è¯¢
node /Users/mlamp/Workspace/JPClaw/dist/cli/index.js chat "é™„è¿‘æœ‰ä»€ä¹ˆå’–å•¡é¦†"

# æ‰¹é‡æµ‹è¯•
node /Users/mlamp/Workspace/JPClaw/dist/cli/index.js test-routing --limit 10
```

---

## ğŸ“Š æµ‹è¯•ç¤ºä¾‹

### ç¤ºä¾‹ 1: æµ‹è¯•å•ä¸ªæŸ¥è¯¢

```bash
$ ./run-routing-test.sh chat "æœç´¢ä¸€ä¸‹ä»Šå¤©çš„ç§‘æŠ€æ–°é—»"

æ£€æŸ¥ gateway çŠ¶æ€...
âœ“ Gateway æ­£åœ¨è¿è¡Œ

ğŸ“¤ å‘é€æŸ¥è¯¢: "æœç´¢ä¸€ä¸‹ä»Šå¤©çš„ç§‘æŠ€æ–°é—»"

ğŸ“¥ JPClaw å›å¤ (2341ms):

æ­£åœ¨è°ƒç”¨ web-search æŠ€èƒ½...
[æœç´¢ç»“æœ]
```

### ç¤ºä¾‹ 2: å¿«é€Ÿæµ‹è¯•

```bash
$ ./run-routing-test.sh quick

å¿«é€Ÿæµ‹è¯•: å‰10ä¸ªé«˜ä¼˜å…ˆçº§æŠ€èƒ½

æ£€æŸ¥ gateway çŠ¶æ€...
âœ“ Gateway æ­£åœ¨è¿è¡Œ

ğŸš€ JPClaw è·¯ç”±æµ‹è¯•

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ æµ‹è¯•ç”¨ä¾‹æ•°: 10

å¼€å§‹æµ‹è¯•...

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

[1/10] æµ‹è¯•: web-search
    æŸ¥è¯¢: "æœç´¢ä¸€ä¸‹ä»Šå¤©çš„ç§‘æŠ€æ–°é—»"
    æœŸæœ›: web-search
    âœ… é€šè¿‡ (è€—æ—¶: 2341ms)

[2/10] æµ‹è¯•: map-poi
    æŸ¥è¯¢: "é™„è¿‘æœ‰ä»€ä¹ˆå’–å•¡é¦†"
    æœŸæœ›: map-poi
    âœ… é€šè¿‡ (è€—æ—¶: 1892ms)

...

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  æµ‹è¯•å®Œæˆ
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Š æ€»æµ‹è¯•æ•°: 10
âœ… é€šè¿‡: 9
âŒ å¤±è´¥: 1
ğŸ“ˆ é€šè¿‡ç‡: 90.0%
â±ï¸  å¹³å‡è€—æ—¶: 1523ms

ğŸ“„ è¯¦ç»†æŠ¥å‘Š: /Users/mlamp/Workspace/JPClaw/tests/routing-test-1771123456789.json
ğŸ“„ Markdown æŠ¥å‘Š: /Users/mlamp/Workspace/JPClaw/tests/routing-test-1771123456789.md
```

---

## ğŸ¯ æµ‹è¯•ç›®æ ‡

| æµ‹è¯•ç±»å‹ | æŠ€èƒ½æ•°é‡ | é¢„è®¡è€—æ—¶ | ç›®æ ‡é€šè¿‡ç‡ |
|---------|---------|---------|-----------|
| å¿«é€Ÿæµ‹è¯• | 10 | ~30ç§’ | â‰¥90% |
| æ ¸å¿ƒåŠŸèƒ½ | 20 | ~1åˆ†é’Ÿ | â‰¥85% |
| å®Œæ•´æµ‹è¯• | 80 | ~2-3åˆ†é’Ÿ | â‰¥80% |

---

## ğŸ” å¦‚ä½•åˆ†ææµ‹è¯•ç»“æœ

### 1. æŸ¥çœ‹å®æ—¶è¾“å‡º

æµ‹è¯•è¿è¡Œæ—¶ä¼šå®æ—¶æ˜¾ç¤ºæ¯ä¸ªæµ‹è¯•çš„ç»“æœï¼š

- âœ… **é€šè¿‡**: æŠ€èƒ½æˆåŠŸè·¯ç”±ï¼Œç¬¦åˆæœŸæœ›
- âŒ **å¤±è´¥**: æœªè·¯ç”±æˆ–è·¯ç”±åˆ°é”™è¯¯çš„æŠ€èƒ½

### 2. æŸ¥çœ‹è¯¦ç»†æŠ¥å‘Š

æµ‹è¯•å®Œæˆåç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ï¼š

```bash
# JSON æ ¼å¼ï¼ˆå¯ç¼–ç¨‹å¤„ç†ï¼‰
cat tests/routing-test-1771123456789.json

# Markdown æ ¼å¼ï¼ˆæ˜“è¯»ï¼‰
cat tests/routing-test-1771123456789.md
```

### 3. åˆ†æå¤±è´¥åŸå› 

å¯¹äºå¤±è´¥çš„æµ‹è¯•ï¼ŒæŠ¥å‘Šä¸­ä¼šæ˜¾ç¤ºï¼š

- **æœŸæœ›æŠ€èƒ½**: åº”è¯¥è·¯ç”±åˆ°å“ªä¸ªæŠ€èƒ½
- **å®é™…ç»“æœ**: "æœªæ£€æµ‹åˆ°æŠ€èƒ½è·¯ç”±" æˆ– "å®é™…è·¯ç”±: xxx"
- **å“åº”å†…å®¹**: JPClaw çš„å®é™…å›å¤

### 4. ä¼˜åŒ– description

æ ¹æ®å¤±è´¥æ¡ˆä¾‹ä¼˜åŒ–å¯¹åº”æŠ€èƒ½çš„ `SKILL.md` ä¸­çš„ `description` å­—æ®µã€‚

---

## ğŸ’¡ ä¼˜åŒ–æµç¨‹

```bash
# 1. é¦–æ¬¡æµ‹è¯•
./run-routing-test.sh quick

# 2. æŸ¥çœ‹å¤±è´¥æ¡ˆä¾‹
cat tests/routing-test-*.md | grep "âŒ"

# 3. ä¼˜åŒ–å¤±è´¥æŠ€èƒ½çš„ SKILL.md
# ç¼–è¾‘ skills/<æŠ€èƒ½å>/SKILL.mdï¼Œå®Œå–„ description

# 4. é‡å¯ gateway åŠ è½½æ–°é…ç½®
launchctl stop com.jpclaw.gateway
launchctl start com.jpclaw.gateway
# æˆ–è€…
pkill -f "node.*gateway" && node dist/cli/index.js gateway &

# 5. é‡æ–°æµ‹è¯•
./run-routing-test.sh quick

# 6. é‡å¤æ­¥éª¤2-5ï¼Œç›´åˆ°è¾¾åˆ°ç›®æ ‡é€šè¿‡ç‡

# 7. å®Œæ•´æµ‹è¯•
./run-routing-test.sh full
```

---

## ğŸš¨ æ•…éšœæ’é™¤

### Gateway æœªè¿è¡Œ

```bash
# æ£€æŸ¥çŠ¶æ€
launchctl list | grep jpclaw

# å¯åŠ¨ gateway
node /Users/mlamp/Workspace/JPClaw/dist/cli/index.js gateway &

# æˆ–ä½¿ç”¨ launchd
launchctl start com.jpclaw.gateway
```

### æµ‹è¯•è¶…æ—¶

å¦‚æœæŸäº›æŠ€èƒ½æ‰§è¡Œæ—¶é—´è¿‡é•¿ï¼š

```bash
# è·³è¿‡æ…¢é€ŸæŠ€èƒ½ï¼Œåªæµ‹è¯•å¿«é€ŸæŠ€èƒ½
./run-routing-test.sh test --category "æœç´¢ä¸ä¿¡æ¯"
```

### æ‰€æœ‰æµ‹è¯•éƒ½å¤±è´¥

å¯èƒ½åŸå› ï¼š

1. **å“åº”æ ¼å¼ä¸åŒ¹é…**: æŸ¥çœ‹ `src/js/cli/test-routing.ts` ä¸­çš„ `extractSkillFromResponse()` å‡½æ•°
2. **è·¯ç”±å™¨æœªå¯ç”¨**: æ£€æŸ¥ skill-router é…ç½®
3. **æè¿°ä¸æ¸…æ™°**: æŠ€èƒ½çš„ description éœ€è¦ä¼˜åŒ–

---

## ğŸ“– ç›¸å…³æ–‡æ¡£

- [CLI æµ‹è¯•å®Œæ•´æŒ‡å—](./CLI_TESTING_GUIDE.md)
- [æ‰‹åŠ¨æµ‹è¯•æ¸…å•](./MANUAL_TEST_CHECKLIST.md)
- [æµ‹è¯•ç”¨ä¾‹è¯´æ˜](./skill-routing-tests.json)

---

## ğŸ‰ å¼€å§‹æµ‹è¯•ï¼

```bash
cd /Users/mlamp/Workspace/JPClaw/tests
./run-routing-test.sh quick
```

ç¥æµ‹è¯•é¡ºåˆ©ï¼ğŸš€
