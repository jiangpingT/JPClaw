# Core provider (at least one)
# OpenAI 已禁用（无额度），重定向到集团网关
OPENAI_API_KEY=your_gateway_api_key
OPENAI_BASE_URL=https://llm-guard.mininglamp.com/v1
OPENAI_AUTH_HEADER=Authorization
OPENAI_AUTH_SCHEME=Bearer
OPENAI_MODEL=gpt-4.1-mini
OPENAI_STT_MODEL=whisper-1
OPENAI_TTS_MODEL=tts-1-hd
OPENAI_USE_PROXY=true

# Anthropic（vibe.deepminer.ai 代理）
ANTHROPIC_AUTH_TOKEN=sk-ant-your_key_here
ANTHROPIC_BASE_URL=https://vibe.deepminer.ai
ANTHROPIC_AUTH_HEADER=x-api-key
ANTHROPIC_AUTH_SCHEME=
ANTHROPIC_MODEL=claude-sonnet-4-5-20250929
ANTHROPIC_VERSION=2023-06-01
ANTHROPIC_ALWAYS_THINKING=true

# Gemini（集团网关，替代原生 Gemini API）
GEMINI_API_KEY=your_gateway_api_key
GEMINI_BASE_URL=https://llm-guard.mininglamp.com/v1
GEMINI_MODEL=gemini-2.5-pro
GEMINI_USE_GATEWAY=true
GEMINI_FREE_IMAGE_MODEL=gemini-3-pro-image-preview
GEMINI_FREE_VIDEO_MODEL=veo-3.1
GEMINI_USE_PROXY=true
GEMINI_PROXY_URL=http://127.0.0.1:7890
GEMINI_VIDEO_API_URL=https://generativelanguage.googleapis.com/v1beta/models/veo-3.1:generateVideo

# ========== DeepSeek V3 备用 LLM（降级策略）==========
# 当主 LLM (Anthropic) 失败或不可用时，自动降级到 DeepSeek V3
JPCLAW_FALLBACK_ENABLED=true
JPCLAW_FALLBACK_PROVIDER=deepseek
JPCLAW_FALLBACK_BASE_URL=https://llm-guard.mininglamp.com/v1
JPCLAW_FALLBACK_API_KEY=your_gateway_api_key
JPCLAW_FALLBACK_MODEL=DeepSeek-V3
JPCLAW_FALLBACK_MAX_TOKENS=4096

# Engine routing (Pi primary by default)
# Engine selection is Pi-only (AgentCore has been removed).

# Pi engine model selection (defaults to provider + recommended model)
JPCLAW_PI_PROVIDER=anthropic
JPCLAW_PI_MODEL=claude-sonnet-4-5-20250929
JPCLAW_PI_THINKING_LEVEL=low
JPCLAW_PI_MAX_MESSAGES=80
JPCLAW_PI_KEEP_MESSAGES=30
JPCLAW_PI_SUMMARY_MAX_CHARS=6000

# Optional canvas endpoint for skills
JPCLAW_CANVAS_URL=http://127.0.0.1:18790/canvas/push

# Optional proxy bypass (comma-separated host list). Useful for WeCom API which may enforce IP allowlists.
JPCLAW_NO_PROXY=qyapi.weixin.qq.com,open.work.weixin.qq.com

# Feishu (Lark)
FEISHU_APP_ID=
FEISHU_APP_SECRET=
FEISHU_VERIFICATION_TOKEN=
FEISHU_ENCRYPT_KEY=
FEISHU_WORK_TIMEOUT_MS=4500
FEISHU_FINAL_TIMEOUT_MS=45000
FEISHU_DEDUPE_WINDOW_MS=300000
FEISHU_FORCE_DIRECT_STYLE=true

# Heartbeat (proactive mechanism)
JPCLAW_HEARTBEAT_ENABLED=false
JPCLAW_HEARTBEAT_INTERVAL_MINUTES=30
JPCLAW_HEARTBEAT_OWNER_DM=true
JPCLAW_HEARTBEAT_DM_MODE=important  # important|always

# Optional admin token for HTTP /admin/* APIs
JPCLAW_ADMIN_TOKEN=
# 禁用 admin endpoints（开发环境）
JPCLAW_DISABLE_ADMIN=true

# Optional: storage state for social profile scraping (Playwright)
JPCLAW_SOCIAL_STORAGE_STATE=sessions/social/storage.json

# Optional: Brave Search key for skills/web-search (provider=brave|auto)
BRAVE_SEARCH_API_KEY=

# Serper.dev Google 搜索 API（2500次/月免费）
SERPER_API_KEY=your_serper_api_key

# Memory Embedding Configuration
# Provider options: openai | anthropic | local | simple
JPCLAW_EMBEDDING_PROVIDER=anthropic
JPCLAW_EMBEDDING_MODEL=claude-sonnet-4-5-20250929
JPCLAW_EMBEDDING_DIMENSIONS=384
JPCLAW_EMBEDDING_TIMEOUT=30000
JPCLAW_EMBEDDING_MAX_RETRIES=3
JPCLAW_EMBEDDING_CACHE_TTL=86400000

# Unified media generation routing (skills/openai-image-gen + skills/video-frames)
# budget_mode: free_first | quality_first
MEDIA_DAILY_BUDGET_USD=5
MEDIA_IMAGE_DAILY_BUDGET_USD=2
MEDIA_VIDEO_DAILY_BUDGET_USD=3
MEDIA_BUDGET_ON_EXCEEDED=degrade # degrade|reject
MEDIA_BUDGET_LEDGER_PATH=sessions/media/budget-ledger.json
MEDIA_ASSUME_GEMINI_FREE_FIRST_ZERO=true
OPENAI_IMAGE_TIMEOUT_MS=240000  # 240秒（4分钟），给网关足够的处理时间
MEDIA_ENABLE_PROVIDER_FALLBACK=false
MEDIA_PRIMARY_MAX_RETRIES=1
MEDIA_FALLBACK_MAX_RETRIES=1
MEDIA_RETRY_BACKOFF_MS=1200

# 媒体生成主提供商配置（优先使用集团网关）
MEDIA_IMAGE_PRIMARY_PROVIDER=mininglamp
MEDIA_IMAGE_FALLBACK_PROVIDER=gemini
MEDIA_VIDEO_PRIMARY_PROVIDER=mininglamp
MEDIA_VIDEO_FALLBACK_PROVIDER=gemini
MEDIA_TTS_PRIMARY_PROVIDER=mininglamp
MEDIA_STT_PRIMARY_PROVIDER=mininglamp

# Optional vendor-specific endpoints
OPENAI_IMAGE_API_URL=https://api.openai.com/v1/images/generations
OPENAI_VIDEO_API_URL=https://api.openai.com/v1/videos
OPENAI_PROXY_URL=http://127.0.0.1:7890

# 代理配置
HTTPS_PROXY=http://127.0.0.1:7890
HTTP_PROXY=http://127.0.0.1:7890
NO_PROXY=localhost,127.0.0.1

# ========== 集团网关配置（统一 LLM 网关）==========
# 明略科技 LLM Guard 网关 - 支持 Gemini/OpenAI/TTS/STT
MININGLAMP_GATEWAY_ENABLED=true
MININGLAMP_GATEWAY_BASE_URL=https://llm-guard.mininglamp.com
MININGLAMP_GATEWAY_API_KEY=your_gateway_api_key
MININGLAMP_GATEWAY_USE_PROXY=false

# 集团网关模型配置
MININGLAMP_GATEWAY_IMAGE_MODEL=gemini-3-pro-image
MININGLAMP_GATEWAY_VIDEO_MODEL=gpt-4o
MININGLAMP_GATEWAY_LLM_MODEL=gemini-2.5-pro
MININGLAMP_GATEWAY_TTS_MODEL=tts-1-hd
MININGLAMP_GATEWAY_STT_MODEL=whisper-1

# ========== 记忆生命周期管理 ==========
# 自动升级、降级、淘汰记忆
JPCLAW_LIFECYCLE_ENABLED=true
JPCLAW_LIFECYCLE_INTERVAL=86400000

# 硬限制保护
JPCLAW_HARD_LIMIT_MAX_MEMORIES=2000
JPCLAW_HARD_LIMIT_ENABLED=true

# ========== Telegram Multi-Bot ==========
TELEGRAM_PROXY_URL=http://127.0.0.1:7890

# Bot1 - 正面专家（主力 bot，直接回答用户问题）
TELEGRAM_BOT1_TOKEN=your_telegram_bot1_token
TELEGRAM_BOT1_NAME=expert
TELEGRAM_BOT1_AGENT=expert

# Bot2 - 反面质疑者（观察后 AI 决定是否参与）
TELEGRAM_BOT2_TOKEN=your_telegram_bot2_token
TELEGRAM_BOT2_NAME=critic
TELEGRAM_BOT2_AGENT=critic

# Bot3 - 深度思考者（观察后 AI 决定是否参与）
TELEGRAM_BOT3_TOKEN=your_telegram_bot3_token
TELEGRAM_BOT3_NAME=thinker
TELEGRAM_BOT3_AGENT=thinker

# ========== Discord Multi-Bot Configuration ==========
# Bot1 - 技术实现专家（主力bot）
DISCORD_BOT1_TOKEN=your_discord_bot1_token
DISCORD_BOT1_NAME=bot1
DISCORD_BOT1_CHANNELS=your_channel_id_1,your_channel_id_2
DISCORD_BOT1_AGENT=expert

# Bot2 - 反面质疑者（仅响应@或协作触发，不主动回复）
DISCORD_BOT2_TOKEN=your_discord_bot2_token
DISCORD_BOT2_NAME=bot2
DISCORD_BOT2_CHANNELS=your_channel_id
DISCORD_BOT2_AGENT=critic

# Bot3 - 深度思考者（仅响应@或协作触发，不主动回复）
DISCORD_BOT3_TOKEN=your_discord_bot3_token
DISCORD_BOT3_NAME=bot3
DISCORD_BOT3_CHANNELS=your_channel_id
DISCORD_BOT3_AGENT=thinker

# Discord 通用配置
DISCORD_APPLICATION_ID=your_discord_application_id
DISCORD_OWNER_USER_ID=your_discord_user_id
JPCLAW_OWNER_DISCORD_ID=your_discord_user_id
DISCORD_PROXY_URL=http://127.0.0.1:7890
DISCORD_SEND_TIMEOUT_MS=30000

# 高德地图API（用于 map-poi skill）
AMAP_API_KEY=your_amap_api_key
JPCLAW_REQUEST_TIMEOUT_MS=300000  # 300秒（5分钟），支持图像生成等耗时任务

# Moltbook integration
MOLTBOOK_API_BASE=https://www.moltbook.com
MOLTBOOK_AUTH_HEADER=x-api-key
MOLTBOOK_API_KEY=your_moltbook_api_key
MOLTBOOK_BEARER_TOKEN=your_moltbook_bearer_token
JPCLAW_SCHEDULER_ENABLED=true
JPCLAW_SCHEDULER_INTERVAL_MS=60000
